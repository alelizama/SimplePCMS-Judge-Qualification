<header class="banner navbar navbar-default navbar-fixed-top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand"  ui-sref="home">SimplePCMS</a>
    </div>

    <nav class="collapse navbar-collapse navbar-right" role="navigation">
      <ul class="nav navbar-nav">
        <li ng-class="{active: $state.includes('documents')}"><a ui-sref="documents.list">Documents</a></li>
        <li ng-class="{active: $state.includes('documents')}"><a ui-sref="documents.score">Scores</a></li>
        <li ng-class="{active: $state.includes('user')}" ng-show="getUserType()==='admin'"><a ui-sref="users.list">Users</a></li>
        <li ng-class="{active: $state.includes('documents')}" ng-show="getUserType()==='admin' || getUserType() === 'judge'" ><a ui-sref="documents.solutions">Solutions</a></li>
        <li ng-class="{active: $state.includes('login')}" ><a ui-sref="auth.login">Login</a></li>
        <!--<li ui-sref-active="active"><a ui-sref="about">About</a></li>-->
      </ul>
    </nav>
  </div>
</header>

<h1>Leaderboard</h1>
<table class="table">
  <thead>
    <tr>
      <th>Username</th>
      <th>Problems</th>
      <th>Score</th>
    </tr>
  </thead>

  <tbody>
    <tr ng-repeat="document in getDocuments() | orderBy:'ownerName':true" ng-show="document.type === 'code' && getUserType()==='participant' && document.ownerName === getOwnerName()" >
      <td>{{document.ownerName}}</td>
      <td>
        <span ng-repeat="solution in documents track by $index" ng-show="solution.type === 'code' && solution.ownerName === getOwnerName()">
            <a ui-sref="documents.solve({id: solution._id})" class="label label-success" ng-show="document.ownerName === getOwnerName()  && getUserType()==='participant'">{{solution.title}}</a>
        </span>
      </td>
      <td ng-show="document.ownerName === getOwnerName()"> {{getTotal(document.ownerName)}}</td>
    </tr>
  </tbody>

  <tbody>
    <tr ng-repeat="document in getDocuments() | orderBy:'ownerName':true" ng-show="document.type === 'code' && (getUserType() === 'judge' || getUserType() === 'admin')" >
      <td>{{document.ownerName}}</td>
      <td>
        <span ng-repeat="solution in documents track by $index" ng-show="solution.type === 'code' && document.ownerName === solution.ownerName ">
            <a ui-sref="documents.solve({id: solution._id})" class="label label-success">{{solution.title}}</a>
        </span>
      </td>
      <td>{{getTotal(document.ownerName)}}</td>
    </tr>
  </tbody>
</table>
