<header class="banner navbar navbar-default navbar-fixed-top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand"  ui-sref="home">SimplePCMS</a>
    </div>

    <nav class="collapse navbar-collapse navbar-right" role="navigation">
      <ul class="nav navbar-nav">
        <li ng-class="{active: $state.includes('documents')}" ng-show="getUserType()==='admin' || getUserType() === 'judge' || getUserType() === 'participant'"><a ui-sref="documents.list">Documents</a></li>
        <li ng-class="{active: $state.includes('documents')}" ng-show="getUserType()==='admin' || getUserType() === 'judge' || getUserType() === 'participant'"><a ui-sref="documents.score">Scores</a></li>
        <li ng-class="{active: $state.includes('user')}" ng-show="getUserType()==='admin'"><a ui-sref="users.list">Users</a></li>
        <li ng-class="{active: $state.includes('documents')}" ng-show="(getUserType()==='admin' || getUserType() === 'judge')" ><a ui-sref="documents.solutions">Solutions</a></li>
        <li ng-class="{active: $state.includes('login')}" ><a ui-sref="auth.login">Login</a></li>
        <!--<li ui-sref-active="active"><a ui-sref="about">About</a></li>-->
      </ul>
    </nav>
  </div>
</header>

<div class="">
  <h1><span ng-show="!document.id" >Add new</span><span ng-show="document.id">Edit</span> document</h1>
  <alert type="{{message.type}}" ng-show="message.msg">{{message.msg}}</alert>

  <form  name="new_document_form" role="form">
    <div class="form-group">
      <label for="title" class="col-md-2 control-label">Title</label>
      <div class="col-sm-10">
        <input type="text" id="title" name="title" class="form-control" ng-model="document.title" submit-required="true">
      </div>
    </div>

    <div class="form-group">
      <label for="type" class="col-md-2 control-label">Type</label>
      <div class="col-sm-10">
        <select id="type" name="type" class="form-control" ng-model="document.type" ng-options="type for type in documentTypes">
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="content" class="col-md-2 control-label">Content</label>
      <div class="col-sm-10">
        <textarea id="content" name="content" class="form-control" ng-model="document.content" rows="20" submit-required="true">
        </textarea>
      </div>
    </div>

    <div class="form-group" ng-show="document.type === 'problem' && (getUserType() === 'judge' || getUserType() === 'admin')">
      <label for="content" class="col-md-2 control-label">Solution</label>
      <div class="col-sm-10">
        <textarea id="content" name="content" class="form-control" ng-model="document.solution" rows="20" submit-required="true">
        </textarea>
      </div>
    </div>

    <div class="form-group"  ng-hide="document.type !== 'problem'">
      <label for="score" class="col-md-2 control-label">score</label>
      <div class="col-sm-10">
        <input type="text" id="score" name="score" class="form-control" ng-model="document.score">
      </div>
    </div>

    <div class="form-group" ng-hide="document.type !== 'problem'">
      <label for="final-input" class="col-md-2 control-label">Final Input</label>
      <div class="col-sm-10">
        <div class="col-sm-2 no-padding">
          <toggle-switch
                         model="switchFileInput"
                         class="switch-primary"
                         html="true"
                         on-label="<i class='glyphicon glyphicon-pencil'></i>"
                         off-label="<i class='glyphicon glyphicon-file'></i>">
          </toggle-switch>
        </div>
        <div class="col-sm-10">
          <div ng-hide="switchFileInput" ng-file-reader on-readed="onReaded( event, file, 'input' )" class="form-control fancy-hide" read-method="'readAsText'"></div>
          <textarea class="form-control" ng-model="document.attachment[0].content" rows="10" ng-hide="!switchFileInput" class="fancy-hide" ></textarea>
        </div>
      </div>
    </div>


    <div class="form-group" ng-hide="document.type !== 'problem'">
      <label for="final-output" class="col-md-2 control-label">Final Output</label>
      <div class="col-sm-10">
        <div class="col-sm-2 no-padding">
          <toggle-switch
                         model="switchFileOutput"
                         class="switch-primary"
                         html="true"
                         on-label="<i class='glyphicon glyphicon-pencil'></i>"
                         off-label="<i class='glyphicon glyphicon-file'></i>">
          </toggle-switch>
        </div>
        <div class="col-sm-10">
          <div ng-hide="switchFileOutput" ng-file-reader on-readed="onReaded( event, file, 'output' )" class="form-control fancy-hide" read-method="'readAsText'"></div>
          <textarea class="form-control" ng-model="document.attachment[1].content" rows="10" ng-hide="!switchFileOutput" class="fancy-hide" ></textarea>
        </div>
      </div>
    </div>


    <div class="form-group last">
      <div class="col-sm-offset-2 col-sm-10">
        <button ng-click="save(document)" class="btn btn-primary" ng-show="getUserType() === 'judge' || getUserType() === 'admin'" >Save document</button>
        <button ui-sref="documents.list" class="btn btn-default">Cancel</button>

      </div>
    </div>
  </form>
</div>
